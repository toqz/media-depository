/**
 * Angular Collection - The Collection module for AngularJS
 * @version v0.3.3 - 2013-06-04
 * @author Tomasz Kuklis
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(t,r){"use strict";r.module("ngCollection",[]).factory("$collection",["$filter","$parse",function(t,i){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function e(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function o(t,r){return r(t)}function a(t){t||(t={}),t.comparator!==void 0&&(this.comparator=t.comparator),this.idAttribute=t.idAttribute||this.idAttribute,this.current=null,this._reset(),this.initialize.apply(this,arguments)}return a.prototype={idAttribute:"id",initialize:function(){},add:function(t,i){i||(i={});var n,o,a,s,h;return o=this.comparator&&i.sort!==!1,a=r.isString(this.comparator)?this.comparator:null,o&&!s&&(s=!0),t[this.idAttribute]||(t[this.idAttribute]=e()),(h=this.get(t))?r.extend(h,t):(n=t[this.idAttribute],this.hash[n]=t,this.array.push(t),this.length+=1),s&&this.sort(),this},addAll:function(t,r){for(var i=0;t.length>i;i++){var n=t[i];this.add(n,r)}return this},sort:function(){return r.isString(this.comparator)&&(this.array=t("orderBy")(this.array,this.comparator)),this},get:function(t){return null==t?void 0:this.hash[t[this.idAttribute]||t]},find:function(t,r,n){var e=t;if("string"==typeof t){var a=i(t);e=function(t){return n?a(t)==r:a(t)===r},e.prototype.value=r,e.prototype.deepCompare=n}for(var s=0;this.array.length>s;s++)if(o(this.array[s],e))return this.array[s];return void 0},where:function(t,r,n){var e=[],a=t;if("string"==typeof t){var s=i(t);a=function(t){return n?s(t)==r:s(t)===r},a.prototype.value=r,a.prototype.deepCompare=n}for(var h=0;this.array.length>h;h++)o(this.array[h],a)&&e.push(this.array[h]);return e},update:function(t){var i;return i=this.get(t),i&&r.extend(i,t),i||this.add(t),this},remove:function(t){var r;return r=this.array.indexOf(t),-1===r?this:(delete this.hash[t[this.idAttribute]],this.array.splice(r,1),this.length--,this)},removeAll:function(){for(var t=this.array.length-1;t>=0;t--)this.remove(this.at(t));return this},last:function(){return this.array[this.length-1]},at:function(t){return this.array[t]},size:function(){return this.array.length},all:function(){return this.array},_reset:function(){this.length=0,this.hash={},this.array=[]}},a.extend=function(t){var i,n=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)};var e=function(){this.constructor=i};return e.prototype=n.prototype,i.prototype=new e,t&&r.extend(i.prototype,t),i.extend=n.extend,i.getInstance=a.getInstance,i._super=n.prototype,i},a.getInstance=function(t){return new this(t)},a}])})(window,window.angular);